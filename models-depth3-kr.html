<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/style-pc.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <title>Aile Company</title>
  <style>
    ::-moz-selection {
      color: #007481;
    }
    ::selection {
      color: #007481;
    }

  </style>
</head>
<body>
  <div class="container">
    <div class="wrap scr-dwn">

      <!--####### 헤더 #######-->
      <header>
        <h1><a href="home-kr.html"></a></h1>
        <a class="menu-btn">
          <span></span>
          <span></span>
          <span></span>
        </a>
        <a href="" class="ins-btn web"></a>
      </header>
      <div class="menu-wrap">
        <div class="menu-inner">
          <ul class="depth1">
            <li><a href="home-kr.html">ABOUT</a></li>
            <li>
              <a href="models-depth1-kr.html">MODELS</a>
              <ul class="depth2">
                <li><a href="models-female-kr.html">WOMEN</a></li>
                <li><a href="models-male-kr.html">MEN</a></li>
              </ul>
            </li>
            <li>
              <a href="artists-depth1-kr.html">ARTISTS</a>
              <ul class="depth2">
                <li><a href="artists-actors-kr.html">ACTORS</a></li>
                <li><a href="artists-enter-kr.html">ENTERTAINERS</a></li>
              </ul>
            </li>
            <li><a href="xr-kr.html">STAGE AILE</a></li>
            <li><a href="videos-kr.html">VIDEO</a></li>
            <li><a href="now-kr.html">AILE NOW</a></li>
            <li><a href="contact-kr.html">CONTACT</a></li>
          </ul>
          <div class="m-bottom">
            <a href="" class="ins mo"></a>
            <div class="lang-wrap">
              <a href="models-depth3-kr.html" class="on">KR</a>
              <a href="models-depth3-en.html">EN</a>
            </div>
          </div>
        </div>
      </div>
      <!--####### 헤더 끝 #######-->


      <article class="depth3 model-depth3">
        <section class="visual">
          <div class="profile">
            <h2 class="md-name">KIM WON JOONG</h2>
            <p class="birth">Birth 87</p>
            <p class="height">Height 189cm</p>
            <p class="waist">Waist 30 inch</p>
            <p class="shoes">Shoes 290mm</p>
          </div>

          <div class="swiper mySwiper visual-swiper">
            <div class="swiper-wrapper">
              <div class="swiper-slide"><img src="" alt=""></div>
              <div class="swiper-slide"><img src="" alt=""></div>
            </div>
            <div class="swiper-pagination"></div>
          </div>
          <a href="videos-kr.html" class="go-btn video-go">VIDEOS <img src="img/mo/ico-go.svg" alt=""></a>
          <a href="" class="go-btn ins-go">INSTAGRAM <img src="img/mo/ico-go.svg" alt=""></a>
        </section>
        <section class="photo-book">
          <ul>
          </ul>
        </section>
      </article>

      <div class="popup">
        <div class="dim"></div>
        <div class="popup-inner">
          <img src="" alt="">
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script>
    var depth3 = new Swiper(".depth3 .mySwiper", {
      speed: 800,
      loop:true,
      autoplay: {
        delay: 2000,
        disableOnInteraction:false,
      },
      pagination: {
        el: ".swiper-pagination",
      },
    });
  </script>
  <script src="js/nav.js"></script>
  <script>
    temp = location.href.split('?');
    history.replaceState(temp, '', 'models-depth3-kr.html');
    let modelName;
    if(temp.length === 2) {
      modelName = temp[1];
      localStorage.setItem('nm', modelName)
    }

    let xhttp = new XMLHttpRequest();

    xhttp.onreadystatechange = function() {
      if(xhttp.readyState === 4 && xhttp.status === 200){
        jsonfunc(this.responseText);
      }
    }
    xhttp.open("GET", "./data/models.json", true);
    xhttp.send();

    let jsonData;
    function jsonfunc(v) {
      jsonData = JSON.parse(v);
      profile(jsonData[0]);
    }

    let profName = document.querySelector('.md-name');
    let profBirth = document.querySelector('.birth');
    let profHeight = document.querySelector('.height');
    let profWaist = document.querySelector('.waist');
    let profShoes = document.querySelector('.shoes');
    let profVideoLink = document.querySelector('.video-go');
    let profInsLink = document.querySelector('.ins-go');
    let nm = localStorage.getItem('nm');
    function profile(v) {
      const {insta, name, shoes, birth, height, photo, vlink, waist} = v[nm];
      profName.innerHTML = name;
      profBirth.innerHTML = 'Birth ' + birth;
      profHeight.innerHTML = 'Height ' + height;
      profWaist.innerHTML = 'Waist ' + waist;
      profShoes.innerHTML = 'Shoes ' + shoes;
      profVideoLink.href = vlink;
      profInsLink.href = insta;
      pic(photo);
    }

    let ul = document.querySelector('.photo-book ul');
    let el = '';
    function pic(v) {
      for (let i = 1; i < v; i++) {
        el = el + '<li><a><img src="img/pc/'+ nm + '/'+ nm + '-' + i +'.png" alt="" class="mo"><img src="img/pc/'+ nm + '/'+ nm + '-' + i +'.png" alt="" class="web"></a></li>'
      }
      ul.innerHTML = el;
    }

    let visualImg = document.querySelectorAll('.visual-swiper .swiper-slide');
    let imgEl = '';
    Array.prototype.forEach.call(visualImg, function(e, idx) {
      if(idx === 0) {
        e.children[0].src = 'img/pc/' + nm + '/'+ nm + '-' + 2 +'.png';
      } else if (idx === 1) {
        e.children[0].src = 'img/pc/' + nm + '/'+ nm + '-' + 1 +'.png';
      } else if (idx === 2) {
        e.children[0].src = 'img/pc/' + nm + '/'+ nm + '-' + 2 +'.png';
      } else {
        e.children[0].src = 'img/pc/' + nm + '/'+ nm + '-' + 1 +'.png';
      }
    });

    (function() {
      setTimeout(function() {
        let photoClick = document.querySelectorAll('.photo-book a');
        let photoList = document.querySelectorAll('.photo-book li');
        let imgSrc;
        photoClick.forEach(function(item) {
          item.addEventListener('click', function(e) {
            let winWidth = window.innerWidth;
            if(winWidth > 800) {
              imgSrc = e.target.children[1].src;
              return changeImg(imgSrc);
            } else {
              for (let i = 0; i < photoList.length; i++) {
                photoList[i].classList.remove('on');
              }
              e.currentTarget.parentNode.classList.add('on');
              imgSrc = e.target.src;
              return changeImg(imgSrc);
            }
          });
        });

        let popup = document.querySelector('.popup');
        let popImg = document.querySelector('.popup-inner img')
        function changeImg(v) {
          popImg.src = v;
          popup.style.display = 'block';
          setTimeout(function() {
            popup.style.opacity = '1';
          }, 100);
        }
        popup.addEventListener('click', function() {
          popImg.src = '';
          popup.style.opacity = '0';
          setTimeout(function() {
            popup.style.display = 'none';
          }, 500);
        });
      },500)
    }());
  </script>
</body>
</html>